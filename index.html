<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Registro de Actualización de Datos</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');

  :root {
    --primary-color: #1a73e8;
    --secondary-color: #0d47a1;
    --accent-color: #34c759;
    --text-color: #1c2526;
    --background-color: #f5f7fa;
    --card-background: #ffffff;
    --shadow: 0 6px 20px rgba(0,0,0,0.1);
    --border-radius: 16px;
    --transition: all 0.3s ease-in-out;
    --error-color: #d32f2f;
  }

  * { box-sizing: border-box; margin:0; padding:0; }
  body { font-family:'Poppins',sans-serif; background:var(--background-color); color:var(--text-color); padding-top:120px; transition: background 0.3s; }

  header {
    position:fixed; top:0; left:0; width:100%;
    background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));
    color:white; text-align:center; padding:20px;
    box-shadow:var(--shadow); z-index:1000;
  }

  header h1 { font-size:1.8rem; margin-bottom:5px; }
  header span { font-size:0.95rem; opacity:0.85; }

  .form-container {
    background:var(--card-background); padding:30px;
    border-radius:var(--border-radius); width:95%; max-width:650px;
    margin:30px auto; box-shadow:var(--shadow); position:relative;
    transition: transform 0.4s ease, opacity 0.4s ease;
  }

  h2 { text-align:center; color:var(--primary-color); margin-bottom:25px; }

  .progress-container {
    margin-bottom:25px;
  }

  .progress {
    height:10px; background:#e8ecef; border-radius:5px; overflow:hidden; margin-bottom:10px;
  }

  .progress-bar {
    height:100%; background:linear-gradient(90deg,var(--primary-color),var(--accent-color)); width:0; transition: width 0.4s ease;
  }

  .step { display:none; opacity:0; transform:translateY(15px); transition:var(--transition); }
  .step.active { display:block; opacity:1; transform:translateY(0); }

  label { display:block; margin:15px 0 8px; font-weight:500; }
  input, textarea { width:100%; padding:14px; border:1px solid #dfe1e5; border-radius:10px; margin-bottom:10px; font-size:1rem; transition: border-color 0.3s, box-shadow 0.3s; }
  input:focus, textarea:focus { border-color:var(--primary-color); box-shadow:0 0 0 4px rgba(26,115,232,0.15); outline:none; }

  .btn { padding:14px; border:none; border-radius:10px; cursor:pointer; width:48%; margin:15px 1%; font-weight:600; transition:transform 0.2s, box-shadow 0.2s; }
  .btn-primary { background:var(--primary-color); color:white; }
  .btn-primary:hover { transform:translateY(-3px); box-shadow:0 4px 12px rgba(0,0,0,0.2); }
  .btn-secondary { background:#e8ecef; color:var(--text-color); }
  .btn-secondary:hover { transform:translateY(-2px); box-shadow:0 4px 12px rgba(0,0,0,0.1); }

  .hidden { display:none !important; }

  /* Modal de carga */
  .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); align-items:center; justify-content:center; opacity:0; transition:opacity 0.3s ease; z-index:2000; }
  .modal.active { display:flex; opacity:1; }
  .modal-content {
    background:var(--card-background); padding:25px; border-radius:var(--border-radius);
    text-align:center; box-shadow:var(--shadow); animation:fadeInUp 0.5s ease forwards;
  }

  @keyframes fadeInUp {
    0% { transform:translateY(30px); opacity:0; }
    100% { transform:translateY(0); opacity:1; }
  }

  @media (max-width:600px){
    .btn { width:100%; margin:10px 0; }
  }
</style>
</head>
<body>
<header>
  <h1>Actualización de Datos</h1>
  <span>Asesor: Miguel Romero</span>
</header>

<div class="form-container">
  <h2>Formulario de Actualización</h2>

  <div class="progress-container">
    <div class="progress">
      <div class="progress-bar" id="progressBar"></div>
    </div>
  </div>

  <form id="actualizacionForm">
    <!-- STEP 1 -->
    <div class="step active">
      <label>Nombre del Cliente:</label><input type="text" name="Nombre del Cliente" required>
      <label>Número de Identidad:</label><input type="text" name="Número de Identidad" required>
      <label>Correo Personal:</label><input type="email" name="Correo Personal" required>
      <label>Dirección Casa:</label><textarea name="Dirección Casa" required></textarea>
    </div>

    <!-- STEP 2 -->
    <div class="step">
      <label>Teléfono Casa:</label><input type="tel" name="Teléfono Casa" required>
      <label>Celular:</label><input type="tel" name="Celular" required>
      <label>Lugar Trabajo:</label><input type="text" name="Lugar Trabajo" required>
      <label>Cargo:</label><input type="text" name="Cargo" required>
    </div>

    <!-- STEP 3 -->
    <div class="step">
      <label>Dirección Trabajo:</label><textarea name="Dirección Trabajo" required></textarea>
      <label>Ingreso Mensual:</label><input type="number" name="Ingreso Mensual" required>
      <label>Antigüedad Laboral (Años):</label><input type="number" name="Años" required>
    </div>

    <!-- STEP 4 -->
    <div class="step">
      <label>Referencia Familiar:</label><input type="text" name="Referencia Familiar" required>
      <label>Teléfono Ref Familiar:</label><input type="tel" name="Teléfono Ref Familiar" required>
      <label>Amistad:</label><input type="text" name="Amistad" required>
      <label>Teléfono Amistad:</label><input type="tel" name="Teléfono Amistad" required>
    </div>

    <div class="button-group">
      <button type="button" class="btn btn-secondary hidden" id="prevBtn" onclick="nextPrev(-1)">Atrás</button>
      <button type="button" class="btn btn-primary" id="nextBtn" onclick="nextPrev(1)">Siguiente</button>
    </div>
  </form>
</div>

<div id="loadingScreen" class="modal">
  <div class="modal-content">
    <h3>Enviando datos...</h3>
    <p>Por favor espere</p>
  </div>
</div>

<script>
let currentStep=0;
let steps=document.querySelectorAll(".step");
let nextBtn=document.getElementById("nextBtn");
let prevBtn=document.getElementById("prevBtn");
let progressBar=document.getElementById("progressBar");
let loadingScreen=document.getElementById("loadingScreen");

function showStep(n){
  steps.forEach((s,i)=>s.classList.remove("active"));
  steps[n].classList.add("active");
  prevBtn.classList.toggle("hidden", n===0);
  nextBtn.innerText = n===steps.length-1 ? "Enviar por WhatsApp" : "Siguiente";
  progressBar.style.width = ((n+1)/steps.length*100) + "%";
}

function nextPrev(n){
  let inputs=steps[currentStep].querySelectorAll("[required]");
  for(let inp of inputs){ if(!inp.value.trim()){ alert("Por favor complete todos los campos"); return; } }
  currentStep+=n;
  if(currentStep>=steps.length){ enviarWhatsApp(); return; }
  if(currentStep<0) currentStep=0;
  showStep(currentStep);
}

function enviarWhatsApp(){
  loadingScreen.classList.add("active");
  let form=document.getElementById("actualizacionForm");
  let data=new FormData(form);

  let pasos = {
    "Datos Personales":["Nombre del Cliente","Número de Identidad","Correo Personal","Dirección Casa"],
    "Contacto":["Teléfono Casa","Celular","Lugar Trabajo","Cargo"],
    "Laborales":["Dirección Trabajo","Ingreso Mensual","Años"],
    "Referencias":["Referencia Familiar","Teléfono Ref Familiar","Amistad","Teléfono Amistad"]
  };

  let mensaje="*Actualización de Datos:*\n\n";
  for(let seccion in pasos){
    mensaje+=`*${seccion}*\n`;
    pasos[seccion].forEach(key=>{
      let value=data.get(key);
      if(value && value.trim()) mensaje+=`- ${key}: ${value}\n`;
    });
    mensaje+="\n";
  }

  let numero="50489776523";
  let url=`https://wa.me/${numero}?text=${encodeURIComponent(mensaje)}`;

  setTimeout(()=>{
    window.open(url,"_blank");
    loadingScreen.classList.remove("active");
    alert("✅ Datos enviados correctamente");
    location.reload();
  },1000);
}

showStep(currentStep);
</script>
</body>
</html>
